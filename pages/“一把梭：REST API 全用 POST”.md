tags:: reading notes

- https://coolshell.cn/articles/22173.html
- 为何用不同 HTTP 动词？
	- 编程分为**业务**逻辑与**控制**逻辑
	- HTTP 的 RFC 定义了不同动词的行为逻辑
	- 对于HTTP动词，因其出现在协议头，所以被用于控制逻辑
	- 动词的幂等性
		- 幂等：GET PUT DELETE HEAD OPTIONS, 不幂等: POST UPDATE
		- 对于远程调用很关键，比如timeout，缓存，路由，权限等
	- OPTIONS 用于获取API相关信息
	- login API 因其需要新增session，所以使用POST。
		- 不要机械地通过数据库的CRUD来对应这些动词，很多时候，还是要分析一下业务语义。
- RESTful 复杂查询
	- 增删改查等
	- 对于一些更为复杂的操作，建议通过分别调用多个API的方式来完成，虽然这样会增加网络请求的次数，但是这样的可以让后端程序和数据耦合度更小，更容易成为微服务的架构
- 1）为什么API 要Restful，并符合规范？
	- 符合共识，降低研发成本，避免踩坑
- 2）为什么“过早优化”不适用于API设计？
	- 因为API是一种契约，一旦被使用上，就很难再变更了，就算你发行新的版本的API，你还要驱动各种调用方升级他们的调用方式。
- 3）POST 更安全吗？
	- 整个请求的**HTTP URL PATH**会全部封装在HTTP的协议头中。只要是HTTPS，就是安全的。
- 5）早点回家的正确姿势
	- 你应该做的是为了“长期的早回家”，而不是“短期的早回家”
- 陈皓关于[[GraphQL]]的评价
	- GraphQL的问题太多了，具体有这个几个：
	  1）数据模型耦合严重，导致后端逻辑会被这个数据模型侵入。
	  2）接口契约太过灵活，导致很难控制
	  3）一个API干所有的事，无法加缓存
	  4）返回的数据中，部分数据可以出错为空。
	  5）无法进行监控统计，权限，控制和治理。
	- 早期做PoC可以，小应用可以，大型的应用玩GraphQL那就自己给自己挖坑了
-